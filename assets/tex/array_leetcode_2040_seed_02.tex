\documentclass[tikz, border=20pt]{standalone}
\usepackage{xcolor}
\usepackage{tikz}
\usetikzlibrary{arrows.meta, positioning, fit, backgrounds, shapes.misc, matrix, calc}

\definecolor{svlcolor0}{HTML}{F0F0F0}
\definecolor{svlcolor1}{HTML}{000000}
\definecolor{svlcolor2}{HTML}{4CAF50}
\definecolor{svlcolor3}{HTML}{FFFFFF}
\definecolor{svlcolor4}{HTML}{FFD700}
\definecolor{svlcolor5}{HTML}{CCCCCC}
\tikzset{
  code_line/.style={anchor=west, font=\ttfamily},
  code_highlight/.style={code_line, fill=yellow!20, rounded corners=2pt, inner sep=2pt},
  element_idle/.style={draw=black!60, fill=black!10, minimum size=1cm, line width=1pt, rounded corners=2pt},
  element_idle_node/.style={circle, draw=black!60, fill=black!10, minimum size=1.0cm, line width=1pt, align=center, font=\small},
  element_current_node/.style={element_idle_node, fill=yellow!30},
  element_default/.style={element_idle},
  edge_normal_edge/.style={line width=1.2pt, color=black!60, shorten >=2pt, shorten <=2pt},
  edge_tree_edge/.style={edge_normal_edge},
  cell_current_cell/.style={fill=yellow!20, rounded corners=1pt},
  box_default_boundary/.style={draw=black!50, dashed, rounded corners=3pt, inner sep=8pt},
  dep_arrow/.style={color=red!70, line width=1pt, ->, >=Stealth},
  comment_default_comment/.style={draw=black!30, fill=white, rounded corners=2pt, inner sep=2pt},
  element_idle/.style={draw=black!60, fill=svlcolor0, text=svlcolor1, minimum size=1cm, line width=1pt, rounded corners=2pt},
  cell_idle/.style={fill=svlcolor0, draw=black!60, rounded corners=1pt},
  element_current/.style={draw=black!60, fill=svlcolor2, text=svlcolor3, minimum size=1cm, line width=1pt, rounded corners=2pt},
  cell_current/.style={fill=svlcolor2, draw=black!60, rounded corners=1pt},
  element_comparing/.style={draw=black!60, fill=svlcolor4, text=svlcolor1, minimum size=1cm, line width=1pt, rounded corners=2pt},
  cell_comparing/.style={fill=svlcolor4, draw=black!60, rounded corners=1pt},
  element_processed/.style={draw=black!60, fill=svlcolor5, text=svlcolor1, minimum size=1cm, line width=1pt, rounded corners=2pt},
  cell_processed/.style={fill=svlcolor5, draw=black!60, rounded corners=1pt},
  edge_idle/.style={line width=1.5pt, color=black!60, shorten >=2pt, shorten <=2pt},
  dep_idle/.style={color=black!60, line width=1.5pt, ->, >=Stealth},
  edge_current/.style={line width=1.5pt, color=black!60, shorten >=2pt, shorten <=2pt},
  dep_current/.style={color=black!60, line width=1.5pt, ->, >=Stealth},
  edge_comparing/.style={line width=1.5pt, color=black!60, shorten >=2pt, shorten <=2pt},
  dep_comparing/.style={color=black!60, line width=1.5pt, ->, >=Stealth},
  edge_processed/.style={line width=1.5pt, color=black!60, shorten >=2pt, shorten <=2pt},
  dep_processed/.style={color=black!60, line width=1.5pt, ->, >=Stealth},
  cell_changed/.style={fill=yellow!25, rounded corners=1pt}
}
\begin{document}
\begin{tikzpicture}[x=1cm, y=1cm, every node/.style={transform shape}]
\path (0, 1.0) -- (0, 0);
\node[font=\huge\bfseries, anchor=north west] (title_node) at (0,0) {Kth Smallest Product of Two Sorted Arrays};
\node[font=\small\itshape, color=black!70, below=0.1cm of title_node.south west, anchor=north west] (subtitle_node) {Frame 110: Process};
\node[font=\normalsize, fill=black!5, rounded corners=2pt, inner sep=3pt, below=0.1cm of subtitle_node.south west, anchor=north west] (vars_node) {\texttt{low}=-5, \texttt{high}=-3, \texttt{mid}=-4, \texttt{count}=4, \texttt{current\_num1}=3, \texttt{threshold}=-1.33};
\node (left_col_start) [below=0.8cm of vars_node.south west, anchor=north west] {};
\node[font=\bfseries, anchor=west, fill=black!3, rounded corners, inner sep=5pt] (pseudo_title) [below=1.5cm of left_col_start, anchor=north] {Pseudocode:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_0) at ($(pseudo_title.south west) + (0, -0.05)$) {\hspace*{0.0em}def kthSmallestProduct(nums1, nums2, k):};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_1) at ($(pseudo_line_0.south west) + (0, -0.05)$) {\hspace*{2.0em}\# 确定乘积的可能范围};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_2) at ($(pseudo_line_1.south west) + (0, -0.05)$) {\hspace*{2.0em}low = min(nums1[0]*nums2[0], nums1[0]*nums2[-1], nums1[-1]*nums2[0], nums1[-1]*nums2[-1])};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_3) at ($(pseudo_line_2.south west) + (0, -0.05)$) {\hspace*{2.0em}high = max(nums1[0]*nums2[0], nums1[0]*nums2[-1], nums1[-1]*nums2[0], nums1[-1]*nums2[-1])};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_4) at ($(pseudo_line_3.south west) + (0, -0.05)$) {\hspace*{2.0em}};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_5) at ($(pseudo_line_4.south west) + (0, -0.05)$) {\hspace*{2.0em}\# 二分查找第k小的乘积};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_6) at ($(pseudo_line_5.south west) + (0, -0.05)$) {\hspace*{2.0em}while low <= high:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_7) at ($(pseudo_line_6.south west) + (0, -0.05)$) {\hspace*{4.0em}mid = (low + high) // 2};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_8) at ($(pseudo_line_7.south west) + (0, -0.05)$) {\hspace*{4.0em}count = countPairs(nums1, nums2, mid)};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_9) at ($(pseudo_line_8.south west) + (0, -0.05)$) {\hspace*{4.0em}};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_10) at ($(pseudo_line_9.south west) + (0, -0.05)$) {\hspace*{4.0em}if count < k:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_11) at ($(pseudo_line_10.south west) + (0, -0.05)$) {\hspace*{6.0em}low = mid + 1};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_12) at ($(pseudo_line_11.south west) + (0, -0.05)$) {\hspace*{4.0em}else:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_13) at ($(pseudo_line_12.south west) + (0, -0.05)$) {\hspace*{6.0em}high = mid - 1};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_14) at ($(pseudo_line_13.south west) + (0, -0.05)$) {\hspace*{2.0em}};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_15) at ($(pseudo_line_14.south west) + (0, -0.05)$) {\hspace*{2.0em}return low};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_16) at ($(pseudo_line_15.south west) + (0, -0.05)$) {\hspace*{0.0em}};
\node[code_highlight, font=\ttfamily, anchor=north west] (pseudo_line_17) at ($(pseudo_line_16.south west) + (0, -0.05)$) {\hspace*{0.0em}def countPairs(nums1, nums2, target):};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_18) at ($(pseudo_line_17.south west) + (0, -0.05)$) {\hspace*{2.0em}\# 统计乘积 <= target 的对数};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_19) at ($(pseudo_line_18.south west) + (0, -0.05)$) {\hspace*{2.0em}count = 0};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_20) at ($(pseudo_line_19.south west) + (0, -0.05)$) {\hspace*{2.0em}\# 对nums1中的每个元素，在nums2中使用二分查找统计};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_21) at ($(pseudo_line_20.south west) + (0, -0.05)$) {\hspace*{2.0em}for num1 in nums1:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_22) at ($(pseudo_line_21.south west) + (0, -0.05)$) {\hspace*{4.0em}if num1 > 0:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_23) at ($(pseudo_line_22.south west) + (0, -0.05)$) {\hspace*{6.0em}\# 正数：nums2需要 <= target/num1};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_24) at ($(pseudo_line_23.south west) + (0, -0.05)$) {\hspace*{6.0em}threshold = target / num1};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_25) at ($(pseudo_line_24.south west) + (0, -0.05)$) {\hspace*{6.0em}\# 在nums2中找第一个 > threshold的索引};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_26) at ($(pseudo_line_25.south west) + (0, -0.05)$) {\hspace*{6.0em}left, right = 0, len(nums2)};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_27) at ($(pseudo_line_26.south west) + (0, -0.05)$) {\hspace*{6.0em}while left < right:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_28) at ($(pseudo_line_27.south west) + (0, -0.05)$) {\hspace*{8.0em}mid = (left + right) // 2};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_29) at ($(pseudo_line_28.south west) + (0, -0.05)$) {\hspace*{8.0em}if nums2[mid] > threshold:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_30) at ($(pseudo_line_29.south west) + (0, -0.05)$) {\hspace*{10.0em}right = mid};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_31) at ($(pseudo_line_30.south west) + (0, -0.05)$) {\hspace*{8.0em}else:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_32) at ($(pseudo_line_31.south west) + (0, -0.05)$) {\hspace*{10.0em}left = mid + 1};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_33) at ($(pseudo_line_32.south west) + (0, -0.05)$) {\hspace*{6.0em}count += left};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_34) at ($(pseudo_line_33.south west) + (0, -0.05)$) {\hspace*{4.0em}elif num1 < 0:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_35) at ($(pseudo_line_34.south west) + (0, -0.05)$) {\hspace*{6.0em}\# 负数：nums2需要 >= target/num1};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_36) at ($(pseudo_line_35.south west) + (0, -0.05)$) {\hspace*{6.0em}threshold = target / num1};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_37) at ($(pseudo_line_36.south west) + (0, -0.05)$) {\hspace*{6.0em}\# 在nums2中找第一个 >= threshold的索引};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_38) at ($(pseudo_line_37.south west) + (0, -0.05)$) {\hspace*{6.0em}left, right = 0, len(nums2)};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_39) at ($(pseudo_line_38.south west) + (0, -0.05)$) {\hspace*{6.0em}while left < right:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_40) at ($(pseudo_line_39.south west) + (0, -0.05)$) {\hspace*{8.0em}mid = (left + right) // 2};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_41) at ($(pseudo_line_40.south west) + (0, -0.05)$) {\hspace*{8.0em}if nums2[mid] >= threshold:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_42) at ($(pseudo_line_41.south west) + (0, -0.05)$) {\hspace*{10.0em}right = mid};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_43) at ($(pseudo_line_42.south west) + (0, -0.05)$) {\hspace*{8.0em}else:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_44) at ($(pseudo_line_43.south west) + (0, -0.05)$) {\hspace*{10.0em}left = mid + 1};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_45) at ($(pseudo_line_44.south west) + (0, -0.05)$) {\hspace*{6.0em}count += len(nums2) - left};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_46) at ($(pseudo_line_45.south west) + (0, -0.05)$) {\hspace*{4.0em}else:  \# num1 == 0};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_47) at ($(pseudo_line_46.south west) + (0, -0.05)$) {\hspace*{6.0em}if target >= 0:};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_48) at ($(pseudo_line_47.south west) + (0, -0.05)$) {\hspace*{8.0em}count += len(nums2)};
\node[code_line, font=\ttfamily, anchor=north west] (pseudo_line_49) at ($(pseudo_line_48.south west) + (0, -0.05)$) {\hspace*{2.0em}return count};
\node[fit=(pseudo_title) (pseudo_line_0) (pseudo_line_1) (pseudo_line_2) (pseudo_line_3) (pseudo_line_4) (pseudo_line_5) (pseudo_line_6) (pseudo_line_7) (pseudo_line_8) (pseudo_line_9) (pseudo_line_10) (pseudo_line_11) (pseudo_line_12) (pseudo_line_13) (pseudo_line_14) (pseudo_line_15) (pseudo_line_16) (pseudo_line_17) (pseudo_line_18) (pseudo_line_19) (pseudo_line_20) (pseudo_line_21) (pseudo_line_22) (pseudo_line_23) (pseudo_line_24) (pseudo_line_25) (pseudo_line_26) (pseudo_line_27) (pseudo_line_28) (pseudo_line_29) (pseudo_line_30) (pseudo_line_31) (pseudo_line_32) (pseudo_line_33) (pseudo_line_34) (pseudo_line_35) (pseudo_line_36) (pseudo_line_37) (pseudo_line_38) (pseudo_line_39) (pseudo_line_40) (pseudo_line_41) (pseudo_line_42) (pseudo_line_43) (pseudo_line_44) (pseudo_line_45) (pseudo_line_46) (pseudo_line_47) (pseudo_line_48) (pseudo_line_49), inner sep=0.2cm] (pseudo_block) {};
\node[font=\bfseries, below=1.5cm of pseudo_block] (title_nums2_array) {Second Array};
\begin{scope}[shift={($(title_nums2_array.south) + (0, -1.0)$)}]
\node[element_default] (nums2_array_elem_0) at (-1.7999999999999998, 0) {-3};
\node[below=2pt of nums2_array_elem_0, font=\tiny] {0};
\node[element_default] (nums2_array_elem_1) at (-0.5999999999999999, 0) {-1};
\node[below=2pt of nums2_array_elem_1, font=\tiny] {1};
\node[element_default] (nums2_array_elem_2) at (0.6000000000000001, 0) {2};
\node[below=2pt of nums2_array_elem_2, font=\tiny] {2};
\node[element_default] (nums2_array_elem_3) at (1.7999999999999998, 0) {4};
\node[below=2pt of nums2_array_elem_3, font=\tiny] {3};
\end{scope}
\node[below=1.5cm of title_nums2_array] (array_nums2_array_scope) {};
\node[fit=(title_nums2_array) (array_nums2_array_scope), inner sep=0.1cm] (aux_view_block_0) {};
\node[fit=(title_nums2_array) (array_nums2_array_scope), inner sep=0.1cm] (first_aux_view_block) {};
\node[font=\bfseries, below=1.5cm of aux_view_block_0] (title_vars_panel) {Variables};
\matrix (matrix_vars_panel) [below=0.5cm of title_vars_panel, matrix of nodes, nodes={minimum size=1.0cm, anchor=center}, column sep=1pt, row sep=1pt] {
low & -5 \\
high & -3 \\
mid & -4 \\
count & 4 \\
current\_num1 & 3 \\
threshold & -1.33 \\
};
\node[fit=(title_vars_panel) (matrix_vars_panel-1-1), inner sep=0.1cm] (aux_view_block_1) {};
\node[fit=(title_vars_panel) (matrix_vars_panel-1-1), inner sep=0.1cm] (last_aux_view_block) {};
\node[fit={(first_aux_view_block) (last_aux_view_block)}, inner sep=0.1cm] (aux_full_block) {};
\node[fit={(pseudo_block) (aux_full_block)}, inner sep=0pt] (left_column_box) {};
\node (right_col_start) at ($(left_column_box.north east) + (4.5cm, 0)$) {};
\begin{scope}[shift={($(right_col_start) + (0, 0.0)$)}]
\node[element_processed] (a0) at (-1.7999999999999998, 0.0) {-4};
\node[element_processed] (a1) at (-0.5999999999999999, 0.0) {-2};
\node[element_processed] (a2) at (0.6000000000000001, 0.0) {0};
\node[element_current] (a3) at (1.7999999999999998, 0.0) {3};
\end{scope}
\path (current bounding box.south) -- ++(0,-1.0) coordinate (comments_start);
\node[comment_default_comment, align=left, anchor=north west] (comment_node_0) at (current bounding box.west |- comments_start) {正数 3: 寻找nums2中 ≤ -1.33的元素};
\path (title_node.north west) -- (current bounding box.south east);
\end{tikzpicture}
\end{document}
